{%extends "base/navbarStore.html"%}
{% block content %}
{% if cart %}
<div class="container">
    <div class="card">
        <div class="row justify-content-center">
            <div class="col-md-9">

      <div class="py-5 text-center">
        <h1>TU ORDEN</h1>
      </div>
      <div class="row g-5">
        <div class="col-md-5 col-lg-4 order-md-last">
          <h4 class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-primary">Tu Orden</span>
            <span class="badge bg-primary rounded-pill">{{cart.get_cantidad}}</span>
          </h4>
          <ul class="list-group mb-3">
            {% for item in cart %}
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <div>
                <h6 class="my-0">{{ item.id_producto }} x{{ item.cantidad }} </h6>
                <small class="text-muted">{{ productoss.marca_id_marca }}</small>
              </div>
              <span class="text-muted">${{ item.precio_total }}</span>
            </li>
            {% endfor %}
            <li class="list-group-item d-flex justify-content-between lh-sm">
              <h6 style="font-weight: bold;">Total:</h6>
              <h6>${{ cart.get_total_price }}</h6>
            </li>
          </ul>
        </div>
        <div class="col-md-7 col-lg-8">
          <h4 class="mb-3">Datos del Comprador</h4>
          <form class="needs-validation" method="post" style="text-align: center;" class="form-control" novalidate>
            <div class="row g-3"> 
              <div class="col-sm-6">
                <label for="firstName" class="form-label" >Nombre del Comprador:</label>
                <input type="text" class="form-control" placeholder="INGRESE NOMBRE DEL COMPRADOR" id=form.nombre_comprador name="nombre_comprador" minlength="3" maxlength="30" required pattern="[A-Z, a-z]{3,30}"/>
                <div class="invalid-feedback">
                  Requiere de un nombre válido.
                </div>
              </div>
  
              <div class="col-sm-6">
                <label for="lastName" class="form-label">Apellido:</label>
                <input type="text" class="form-control" placeholder="INGRESE APELLIDO DEL COMPRADOR" id=form.apellido_comprador name="apellido_comprador" minlength="3" maxlength="30" required pattern="[A-Z, a-z, Ñ-ñ]{3,30}"/>
                <div class="invalid-feedback">
                    Requiere de un nombre válido.
                </div>
              </div>
  
              <div class="col-sm-6">
                <label for="email" class="form-label">Email:</label>
                <input readonly type="text" class="form-control" type="text" id=form.cuenta_cliente_email name="email" value={{request.session.email}}>
                <div class="invalid-feedback">
                  Ingrese un correo válido
                </div>
              </div>
  
            <hr class="my-4">

            <h4 class="mb-3">Método de Pago</h4>
  
            <div class="my-3">
              <div class="form-check">
                
                <input id=form.tipo_pago_id_tipo_pago name="tipo_pago_id_tipo_pago" type="radio" class="form-check-input" value="2" minlength="3" maxlength="30" required pattern="[A-Z]{3,30}">
                <label class="form-check-label" for="credit">Transferencia</label>
              </div>
              <div class="form-check">
                <input id=form.tipo_pago_id_tipo_pago name="tipo_pago_id_tipo_pago" type="radio" class="form-check-input" value="2" minlength="3" maxlength="30" required pattern="[A-Z]{3,30}"> 
                <label class="form-check-label" for="debit">Tarjeta de Crédito</label>
              </div>
              <div class="form-check">
                <input id=form.tipo_pago_id_tipo_pago name="tipo_pago_id_tipo_pago"  type="radio" class="form-check-input" value="3" minlength="3" maxlength="30" required pattern="[A-Z ]{3,30}">
                <label class="form-check-label" for="paypal">Tarjeta de Débito</label>
              </div>
            </div>
  
            <hr class="my-4">

            {{form.tipo_orden_id_tipo_orden}}
            {{form.precio_total}}
            {{form.cuenta_cliente_email}}
            {{form.estado_pago_id_estado_pago}}
            {{form.estado_pedido_id_estado_pedido}}
  
            <button class="w-100 btn btn-primary btn-lg" type="submit">Realizar Pedido</button>
            {% csrf_token %}
          </form>
         
        </div>
      </div>
    </div>
    <br>
    {% else %}
    <div class="row justify-content-center" >
      <div class="col-md-9">
          <div class="card" style="text-align: center; margin-top: 40px;">
            <div class="alert alert-dange text-center"><H4>NO HAY PRODUCTOS PARA REALIZAR ORDEN</H4> </div>
          </div>
      </div>
    
    </div>
{% endif %}

{% endblock %}
  </div>
    </div>

</div>